# **:computer: Stageus backend 과정**

<br>

## **과정 목표 :key:**
1. Node.js 기반, 현업에서 이용할 수 있는 체계적인 웹서버의 구축과 운용
2. 완벽한 예외처리 경험


## **3대 원칙:scroll:**
1. 작업에 대한 근거를 명확하게 정한 뒤, 최적화된 선택을 하는 원칙
2. 문제를 해결하는 행동을 지양하고, 원인을 파악해 제거하는 원칙
3. 항상 협업을 생각하고, 유지보수와 가독성을 고려하여 개발하는 원칙


## **페이지 도메인:pushpin:**
- https://backend.민경찬.com


## **폴더 구조 :file_folder:**
```bash
├── config
├── module
├── public
│   ├── html
│   ├── css
│   └── js
├── router
└── server.js
```


<br>

# **배운 내용**

## **1 주차**
- **백엔드 개발자의 자세**
    1. 깊게 아는 것이 중요 
    2. 예외처리의 중심부 역할을 제대로 해내야 함


<br/>


## **2 주차**
- **Node.js와 npm**
    1. Node.js : javascript runtime
    2. npm : package관리 
- **과제 :books:**
    1. 내용 : express를 사용하여 로그인, 회원가입, 게시글, 댓글 기능 구현 
    2. mariadb를 사용
    3. RESTful하게 api 설계

## **3 주차**
- **API 예외처리**
    1. NULL, undefined 확인
    2. data 양식 확인
    3. try-catch 사용
- **DB 종류**
    1. 관계형 데이터베이스 (RDB)
        - 엄격한 스키마 존재
        - SQL문을 기준으로 동작
    2. 비관계형 데이터베이스
        - 스키마가 없음
        - 데이터 타입에 구애받지 않음
        - 구축이 용이하고 확장성이 좋음
        - 삽입은 빠르나 수정, 삭제, 탐색은 느림
        - 사용 예시) 로깅 작업
- **PostgreSQL**
    1. 특징
        - 무료
        - 가볍지만 많은 양의 데이터를 다뤄도 크게 문제가 없음
        - 독특한 자료형 제공 (Array, json) // 공식 문서 기준 권장하지 않는다 함
    2. 구조
        - 데이터베이스 - 스키마 - 테이블 
    3. 명령어
        - psql -d [database] : (리눅스 명령어) 해당 데이터베이스로 접속
        - \c [database] : 해당 데이터베이스로 이동
        - \dn : 스키마 목록 출력
        - \du : 유저 목록 출력
        - \dt [schema].[table] 
        - \d+ [table] : 해당 테이블의 구조를 보여줌 
- **과제** :books:
    1. 게시판 CRUD기능을 모두 PostgreSQL로 변경

<br/>

## **4 주차**
- **MongoDB**
    1. 장점
        - 모든 데이터를 json으로 삽입
        - 대충 넣으면 대충 저장해줘서 편함
    2. 단점
        - 수정, 삭제가 불편함
        - 데이터 무결성을 보장하지 않음

- **SSL**
    1. 암호화 방식
        - 비대칭키 방식을 사용
    2. HTTPS
        - http + SSL

<br/>

## **5 주차**
- **Process**
    - 정의 : 운영체제에서 구동되고 있는 프로그램의 단위
    - Multi Process 
        - 동시에 여러 개의 Process를 구동할 수 있게 하는 기술
    - Load Balancing
        - 한 개의 프로그램을 여러개의 process로 쪼개서 사용하는 기술
- **Linux**
    - 명령어
        1. df -h : 스토리지를 볼 수 있음
        2. free -h : 메모리 사용량을 볼 수 있음
        3. lsblk : 파일 시스템을 볼 수 있음

- **EC2**
    - 정의 : ec2 aws에서 제공하는 클라우드 호스팅 서비스
    - 사용할 것 들
        1. S3
            - HDD 기반의 외장 스토리지 (이미지 파일 저장할 때 사용하면 유용)
        2. EBS
            - SSD 기반의 내장 스토리지
        3. RDS  
            - 독립적으로 동작할 수 있는 외장 데이터베이스
- **과제 :books:**
    - 0~3개까지의 이미지를 게시글과 함께 저장하는 기능
        1. 저장할 때는 S3에 저장하고 저장 경로는 DB에 저장
    - ebs를 기존 인스턴스에 추가로 달기
    - 추가로 단 ebs를 뽑아서 다른 ec2에 연결

<br/>

## **6 주차**
- **Stateless VS Stateful**
    - 정의 : 어떤 작업이 처리되고 나서, 흔적을 남기지 않는지
        * 예시 : HTTPS통신


- **Auth 기법의 종류**
    1. HTTP 통신 인증
        * 정의 : 페이지를 호출 할 때 마다 로그인 정보를 다음으로 넘겨줌
        - 단점 : 유지보수가 잘 안됨
    2. Session / Cookie 인증
        * 정의 : 로그인 정보를 session에 저장하여 사용
        - 장점 : 유지보수가 편리
        - 단점 : 여전히 Stateful한 점이 있고 서버의 리소스를 사용하게 됨
    3. Token 
        * 정의 : 데이터를 담은 문자열인 Token을 만들어 클라이언트에 저장하는 방식
        - 장점 : Token을 서버가 가지고 있지 않음
        - 단점 : Token을 서버가 가지고 있지 않음

- **JWT 의 구조**
    * header 
        - 토큰의 탑입, 토큰의 설정이 들어감
    * payload
        - 토큰에 넣고 싶은 값이 들어감
    * signature 
        - 특정한 키가 들어감

- **작동방식**
    1. FE에서 로그인
    2. 로그인 API에서 아이디와 비밀번호를 받아 정확한지 확인
    3. 이후 사용자의 데이터를 담아 Token을 발급

- **과제**
    1. session/cookie를 사용하던 기존 프로젝트 파일을 통째로 복사하여 token사용 방법으로 바꾸기
    2. session/cookie를 이용하던 기존 프로젝트에 중복 로그인 방지 기능 추가하기

<br/>

## **7 주차**
- **Caching**
    - 정의 : 캐시를 사용하여 데이터를 저장하는 방법
        - 캐시 : 메모리 ( RAM )


- **캐싱의 필요성**
    1. 속도
        - 하드디스크에 저장하는 것 보다 약 11배 빠름
    2. 임시데이터 저장
        - DB과부하를 방지하기 위해 저장하는 수단을 DB가 아닌 메모리로 사용함

- **캐싱의 종류**
    1. Clientside 캐싱 : Cookie, Localstorage
    2. Serverside 캐싱 : Session, Redis

- **Redis**
    - 정의 : 메모리를 사용하는 데이터베이스
    - 특징 
        1. 같은 캐싱 기법인 Session과 비교했을 때 Redis는 데이터베이스급의 체계성을 제공함
        2. 서버가 꺼지면 모든 데이터가 날아감 ( 물론 Redis에는 방지책도 있음 )
    - 사용 예시
        1. 속도를 위한 데이터로 사용 ( 인증 )
        2. 임시 저장 데이터로 사용 ( 장바구니, 게시판 글쓰기의 임시 저장 )

- **Collection**
    - Collection : Redis가 자체적으로 가지고 있는 자료 구조
        1. String : 가장 일반적인 Collection 형태
        2. Hash : JSON 형태로 데이터 저장
        3. List : Array 형태로 데이터 저장 ( index로 접근 가능 )
        4. Set : Array 형태로 데이터 저장 ( 중복 데이터가 들어왔을 때 무시 )
        5. Sorted Set : Set과 동일한 기능이지만 정렬도 해줌
    - Collection 사용 주의 사항
        1. 탐색을 할 때 완전 탐색을 진행하기 때문에 Collection을 나눠서 설계하는 것이 중욯마
        2. Collection명은 String이기 때문에 이름이 중복되지 않도록 해야함
        3. Redis 영구적인 데이터가 아니기 떄문에 주기적으로 정리해서 RDB에 저장해줘야 함

- **Redis 설치 과정**
    1. sudo apt install reids-server // redis live server 설치
    2. npm i redis // epxress 서버에서 사용할 라이브러리 설치
    3. pm2 start redis-server // redis live server를 pm2로 켜줌
- **과제**
    1. 6주차 과제인 토큰 기반 인증 방식에서 토큰 저장 위치를 Localstorage에서 Cookie로 바꾸기
    2. 게시글 검색 기능 구현하기 
    3. 최근 검색어 5개 출력하는 기능
    4. 세션 로그인 중복 체크 기능을 Redis를 사용하여 더욱 효율적으로 바꾸기


<br/>
<br/>

# :wave: 떠나며
**2022년 11월 7일 (월요일)**

> 내 주변에는 개발 이야기를 할 사람이 없다. 새로운 기능을 발견한다거나, 공감가는 불편함을 공유할 사람이 없었다. 하지만 **stageus**에서는 개발 관련 얘기를 하기 참 좋다. 대부분 나보다 아는 것도 많기 때문에 내 경험에 대해서 공감받기도 좋고 대화를 통해 배워갈 수 있는 것들도 많아서 좋다.

<br/>

> 요즘 학원이나 부트캠프에 대한 시선이 많이 안좋아졌다. 하지만 방향성을 모르면 노력을 할 수 없다. 그런 점에서 학원을 통해 공부하는 것은 매우 좋다고 생각한다. 내가 무엇을 공부해야하고 무엇을 모르는지 알기가 매우 좋아 방향성이 명확해진다. 공부 방향성이 어느정도 잡히고 공부를 하고나면 이후 무엇을 공부할지는 자연스럽게 정해진다. 

<br/>

> 과제에 대해서도 하고 싶은 말이 참 많다. 과제를 해결하면서 내가 얻어가는 지식이 정말 많다. 과제 자체가 내가 얻어가는 지식이 많도록 설계되어 있는 느낌이다. 심지어 과제를 해결하고 나면 팀장님이 내게 무엇을 알려주고 싶으셨는지 느껴진다. 매 과제가 새로운 도전이지만 충분히 해결할만 했고 너무나도 도움되는 내용이였다. 


<br/>
<br/>

**2022년 11월 20일 (일요일)**

> 이번 수업에서는 jwt에 대해서 배웠다. 크게 어려운 점은 없었다. 기존에 하던 프로젝트를 전부 jwt를 사용하도록 리팩토링하는 것은 꽤 시간이 걸렸지만 말이다... 

<br/>
    
> 이번에 리팩토링하면서 코드 컨벤션에 대해서도 많이 생각하게 되었다. jwt방식으로 변경하는 과정에서 코드를 전체적으로 리팩토링하였고 컨벤션을 지키도록 많이 노력했다. 특히 콜백 방식과 프로미스 방식에 대해서 많이 알게되었다. 코드 컨벤션은 코드의 가독성을 위한 존재라고 생각한다. 그런데 콜백 방식과 프로미스 방식을 동시에 사용하게 되면 코드의 가독성이 현저하게 떨어지는 것 같다. 그래서 최대한 코드의 가독성을 살리고자 프로미스 방식만을 사용하려고 한다. 이번에도 알아가는 것이 많은 것 같아서 기분이 매우 좋다.

**2022년 12월 09일 (일요일)**

> 엘라스틱 서치에 대해서 배웠다. 많은 양의 데이터를 가지고 노는 것이 생각보다 재밌었다. 요즘 계속 이것저것 해보는데 뭔가 psql도 엄청 잘만들어졌다는 것을 세삼 느낀다.